import{r as u,c as d,o as a,a as e,b as g,w as n,v as c,F as y,d as w,e as h,h as D,f as C,t as p,W as v,g as E,n as N,u as j,S as F}from"./app-B4k5rrsx.js";import{R as k}from"./MainModal-CACzSMUH.js";import{_ as I}from"./Dashboard-D-iSJIvD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"mb-4 flex justify-between items-center"},U={class:"relative w-1/3"},B={class:"bg-gray-800 p-4 rounded-md"},K={class:"w-full table-auto text-white"},L={class:"px-4 py-2"},X={class:"px-4 py-2"},$={class:"px-4 py-2"},H={class:"px-4 py-2 flex space-x-2"},W=["onClick"],q=["onClick"],A={class:"mt-4 flex justify-center items-center space-x-2"},Z={class:"text-white"},G={layout:I},te=Object.assign(G,{__name:"categories",props:{categories:Object,filters:Object},setup(f){const b=u(f.filters.search||""),l=u({zid:"",name:"",visible:!0,icon:""}),i=u(!1),x=u(!1),S=()=>{v.get(route("categories.index"),{search:b.value},{preserveState:!0,replace:!0})},M=()=>{l.value={zid:"",name:"",visible:!0},i.value=!0},O=r=>{l.value={...r},i.value=!0},T=r=>{l.value={...r},x.value=!0},o=()=>{i.value=!1,x.value=!1},m=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),_=()=>{l.value.id?v.put(route("categories.update",l.value.id),l.value,{headers:{"X-CSRF-TOKEN":m},onSuccess:o}):v.post(route("categories.store"),l.value,{headers:{"X-CSRF-TOKEN":m},onSuccess:o})},V=()=>{v.delete(route("categories.destroy",l.value.id),{headers:{"X-CSRF-TOKEN":m},onSuccess:o})};return(r,t)=>(a(),d("div",null,[t[13]||(t[13]=e("h1",{class:"text-2xl font-semibold text-white mb-4"},"Категории",-1)),e("div",R,[e("div",U,[n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onInput:S,type:"text",placeholder:"Поиск по названию...",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"},null,544),[[c,b.value]])]),e("button",{onClick:M,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500"}," Создать ")]),e("div",B,[e("table",K,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"ID"),e("th",{class:"px-4 py-2 text-left"},"Название"),e("th",{class:"px-4 py-2 text-left"},"Видимость"),e("th",{class:"px-4 py-2 text-left"},"Действия")])],-1)),e("tbody",null,[(a(!0),d(y,null,w(f.categories.data,s=>(a(),d("tr",{key:s.id,class:"border-t border-gray-700 hover:bg-gray-700 transition"},[e("td",L,p(s.id),1),e("td",X,p(s.name),1),e("td",$,p(s.visible?"Видимая":"Скрытая"),1),e("td",H,[e("button",{onClick:z=>O(s),class:"text-blue-400 hover:text-blue-300"}," Редактировать ",8,W),e("button",{onClick:z=>T(s),class:"text-red-400 hover:text-red-300"}," Удалить ",8,q)])]))),128))])])]),e("div",A,[(a(!0),d(y,null,w(f.categories.links,s=>(a(),E(j(F),{key:s.label,href:s.url,innerHTML:s.label,class:N([["px-4 py-2 rounded-md",s.active?"bg-gray-700 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500",!s.url&&"cursor-not-allowed opacity-50"],"transition-all duration-200"])},null,8,["href","innerHTML","class"]))),128))]),g(k,{isOpen:i.value,title:l.value.id?"Редактирование категории":"Создание категории",confirmText:"Сохранить",onClose:o,onConfirm:_},{default:h(()=>[t[7]||(t[7]=e("label",{for:"name",class:"block mb-2 text-white"},"Название",-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s),type:"text",id:"name",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[c,l.value.name]]),t[8]||(t[8]=e("label",{for:"zid",class:"block mb-2 text-white"},"ZID",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.zid=s),type:"text",id:"zid",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[c,l.value.zid]]),t[9]||(t[9]=e("label",{for:"Icon",class:"block mb-2 text-white"},"Icon",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.icon=s),type:"text",id:"icon",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[c,l.value.icon]]),t[10]||(t[10]=e("label",{for:"visible",class:"block mb-2 text-white"},"Видимость",-1)),n(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.visible=s),id:"visible",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},t[6]||(t[6]=[e("option",{value:!0},"Видимая",-1),e("option",{value:!1},"Скрытая",-1)]),512),[[D,l.value.visible]])]),_:1,__:[7,8,9,10]},8,["isOpen","title"]),g(k,{isOpen:x.value,title:"Удаление категории",confirmText:"Удалить",onClose:o,onConfirm:V},{default:h(()=>[e("div",Z,[t[11]||(t[11]=C(" Вы уверены, что хотите удалить категорию ")),e("b",null,p(l.value.name),1),t[12]||(t[12]=C("? "))])]),_:1},8,["isOpen"])]))}});export{te as default};
