import{r as p,c as m,o as u,a as e,b as y,w as o,v as a,F as g,d as w,e as h,h as z,f as _,t as n,W as b,g as P,n as U,u as D,S as E}from"./app-B4k5rrsx.js";import{_ as I}from"./Dashboard-D-iSJIvD.js";import{R as C}from"./MainModal-CACzSMUH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"mb-4 flex justify-between items-center"},j={class:"relative w-1/3"},F={class:"bg-gray-800 p-4 rounded-md"},R={class:"w-full table-auto text-white"},B={class:"px-4 py-2"},K={class:"px-4 py-2"},L={class:"px-4 py-2"},X={class:"px-4 py-2"},$={class:"px-4 py-2"},G={class:"px-4 py-2 flex space-x-2"},H=["onClick"],Q=["onClick"],W={class:"mt-4 flex justify-center items-center space-x-2"},A={class:"text-white"},Z={layout:I},se=Object.assign(Z,{__name:"servers",props:{servers:Object,filters:Object},setup(v){const c=p(v.filters.search||""),s=p({name:"",ip:"",zid:"",game_port:"",query_port:"",visible:!0}),i=p(!1),f=p(!1),k=()=>{b.get(route("servers.index"),{search:c.value},{preserveState:!0,replace:!0})},S=()=>{s.value={name:"",ip:"",zid:"",game_port:"",query_port:"",visible:!0},i.value=!0},M=d=>{s.value={...d},i.value=!0},O=d=>{s.value={...d},f.value=!0},r=()=>{i.value=!1,f.value=!1},x=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),T=()=>{s.value.id?b.put(route("servers.update",s.value.id),s.value,{headers:{"X-CSRF-TOKEN":x},onSuccess:r}):b.post(route("servers.store"),s.value,{headers:{"X-CSRF-TOKEN":x},onSuccess:r})},V=()=>{b.delete(route("servers.destroy",s.value.id),{headers:{"X-CSRF-TOKEN":x},onSuccess:r})};return(d,t)=>(u(),m("div",null,[t[17]||(t[17]=e("h1",{class:"text-2xl font-semibold text-white mb-4"},"Сервера",-1)),e("div",N,[e("div",j,[o(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),onInput:k,type:"text",placeholder:"Поиск по названию или IP...",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"},null,544),[[a,c.value]])]),e("button",{onClick:S,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500"}," Создать ")]),e("div",F,[e("table",R,[t[7]||(t[7]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"ID"),e("th",{class:"px-4 py-2 text-left"},"Имя"),e("th",{class:"px-4 py-2 text-left"},"IP"),e("th",{class:"px-4 py-2 text-left"},"Game Port"),e("th",{class:"px-4 py-2 text-left"},"Query Port"),e("th",{class:"px-4 py-2 text-left"},"Действия")])],-1)),e("tbody",null,[(u(!0),m(g,null,w(v.servers.data,l=>(u(),m("tr",{key:l.id,class:"border-t border-gray-700 hover:bg-gray-700 transition"},[e("td",B,n(l.id),1),e("td",K,n(l.name),1),e("td",L,n(l.ip),1),e("td",X,n(l.game_port),1),e("td",$,n(l.query_port),1),e("td",G,[e("button",{onClick:q=>M(l),class:"text-blue-400 hover:text-blue-300"}," Редактировать ",8,H),e("button",{onClick:q=>O(l),class:"text-red-400 hover:text-red-300"}," Удалить ",8,Q)])]))),128))])])]),e("div",W,[(u(!0),m(g,null,w(v.servers.links,l=>(u(),P(D(E),{key:l.label,href:l.url,innerHTML:l.label,class:U([["px-4 py-2 rounded-md",l.active?"bg-gray-700 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500",!l.url&&"cursor-not-allowed opacity-50"],"transition-all duration-200"])},null,8,["href","innerHTML","class"]))),128))]),y(C,{isOpen:i.value,title:s.value.id?"Редактирование сервера":"Создание сервера",confirmText:"Сохранить",onClose:r,onConfirm:T},{default:h(()=>[t[9]||(t[9]=e("label",{for:"name",class:"block mb-2 text-white"},"Имя",-1)),o(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.name=l),type:"text",id:"name",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[a,s.value.name]]),t[10]||(t[10]=e("label",{for:"ip",class:"block mb-2 text-white"},"IP",-1)),o(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.ip=l),type:"text",id:"ip",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[a,s.value.ip]]),t[11]||(t[11]=e("label",{for:"game_port",class:"block mb-2 text-white"},"Game Port",-1)),o(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.game_port=l),type:"number",id:"game_port",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[a,s.value.game_port]]),t[12]||(t[12]=e("label",{for:"query_port",class:"block mb-2 text-white"},"Query Port",-1)),o(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.query_port=l),type:"number",id:"query_port",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[a,s.value.query_port]]),t[13]||(t[13]=e("label",{for:"zid",class:"block mb-2 text-white"},"ZID",-1)),o(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.zid=l),type:"number",id:"zid",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[a,s.value.zid]]),t[14]||(t[14]=e("label",{for:"visible",class:"block mb-2 text-white"},"Видимость",-1)),o(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.visible=l),id:"visible",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},t[8]||(t[8]=[e("option",{value:!0},"Видимый",-1),e("option",{value:!1},"Скрытый",-1)]),512),[[z,s.value.visible]])]),_:1,__:[9,10,11,12,13,14]},8,["isOpen","title"]),y(C,{isOpen:f.value,title:"Удаление сервера",confirmText:"Удалить",onClose:r,onConfirm:V},{default:h(()=>[e("div",A,[t[15]||(t[15]=_(" Вы уверены, что хотите удалить сервер ")),e("b",null,n(s.value.name),1),t[16]||(t[16]=_("? "))])]),_:1},8,["isOpen"])]))}});export{se as default};
