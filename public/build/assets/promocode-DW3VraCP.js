import{r as p,c,o as u,a as e,b as y,w as a,v as d,F as g,d as w,e as h,h as N,f as _,t as o,W as x,g as U,n as j,u as D,S as F}from"./app-B4k5rrsx.js";import{_ as R}from"./Dashboard-D-iSJIvD.js";import{R as C}from"./MainModal-CACzSMUH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"mb-4 flex justify-between items-center"},K={class:"relative w-1/3"},L={class:"bg-gray-800 p-4 rounded-md"},X={class:"w-full table-auto text-white"},$={class:"px-4 py-2"},H={class:"px-4 py-2"},I={class:"px-4 py-2"},P={class:"px-4 py-2"},W={class:"px-4 py-2"},q={class:"px-4 py-2"},z={class:"px-4 py-2 flex space-x-2"},A=["onClick"],G=["onClick"],J={class:"mt-4 flex justify-center items-center space-x-2"},Q={class:"text-white"},Y={layout:R},oe=Object.assign(Y,{__name:"promocode",props:{promocodes:Object,filters:Object},setup(b){const f=p(b.filters.search||""),l=p({code:"",type:"bonus_balance",value:"",max_uses:"",used:"0"}),r=p(!1),v=p(!1),k=()=>{x.get(route("promocodes.index"),{search:f.value},{preserveState:!0,replace:!0})},S=()=>{l.value={code:"",type:"bonus_balance",value:"",max_uses:"",used:"0"},r.value=!0},M=i=>{l.value={...i},r.value=!0},O=i=>{l.value={...i},v.value=!0},n=()=>{r.value=!1,v.value=!1},m=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),T=()=>{l.value.id?x.put(route("promocodes.update",l.value.id),l.value,{headers:{"X-CSRF-TOKEN":m},onSuccess:n}):x.post(route("promocodes.store"),l.value,{headers:{"X-CSRF-TOKEN":m},onSuccess:n})},V=()=>{x.delete(route("promocodes.destroy",l.value.id),{headers:{"X-CSRF-TOKEN":m},onSuccess:n})};return(i,t)=>(u(),c("div",null,[t[15]||(t[15]=e("h1",{class:"text-2xl font-semibold text-white mb-4"},"Промокоды",-1)),e("div",B,[e("div",K,[a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),onInput:k,type:"text",placeholder:"Поиск по коду...",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"},null,544),[[d,f.value]])]),e("button",{onClick:S,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500"}," Создать ")]),e("div",L,[e("table",X,[t[6]||(t[6]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"ID"),e("th",{class:"px-4 py-2 text-left"},"Код"),e("th",{class:"px-4 py-2 text-left"},"Тип"),e("th",{class:"px-4 py-2 text-left"},"Значение"),e("th",{class:"px-4 py-2 text-left"},"Макс. использований"),e("th",{class:"px-4 py-2 text-left"},"Использовано"),e("th",{class:"px-4 py-2 text-left"},"Действия")])],-1)),e("tbody",null,[(u(!0),c(g,null,w(b.promocodes.data,s=>(u(),c("tr",{key:s.id,class:"border-t border-gray-700 hover:bg-gray-700 transition"},[e("td",$,o(s.id),1),e("td",H,o(s.code),1),e("td",I,o(s.type),1),e("td",P,o(s.value),1),e("td",W,o(s.max_uses),1),e("td",q,o(s.used),1),e("td",z,[e("button",{onClick:E=>M(s),class:"text-blue-400 hover:text-blue-300"}," Редактировать ",8,A),e("button",{onClick:E=>O(s),class:"text-red-400 hover:text-red-300"}," Удалить ",8,G)])]))),128))])])]),e("div",J,[(u(!0),c(g,null,w(b.promocodes.links,s=>(u(),U(D(F),{key:s.label,href:s.url,innerHTML:s.label,class:j([["px-4 py-2 rounded-md",s.active?"bg-gray-700 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500",!s.url&&"cursor-not-allowed opacity-50"],"transition-all duration-200"])},null,8,["href","innerHTML","class"]))),128))]),y(C,{isOpen:r.value,title:l.value.id?"Редактирование промокода":"Создание промокода",confirmText:"Сохранить",onClose:n,onConfirm:T},{default:h(()=>[t[8]||(t[8]=e("label",{for:"code",class:"block mb-2 text-white"},"Код",-1)),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.code=s),type:"text",id:"code",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[d,l.value.code]]),t[9]||(t[9]=e("label",{for:"type",class:"block mb-2 text-white"},"Тип",-1)),a(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.type=s),id:"type",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},t[7]||(t[7]=[e("option",{value:"bonus_balance"},"Бонусный баланс",-1),e("option",{value:"deposit_bonus"},"Бонус на депозит",-1)]),512),[[N,l.value.type]]),t[10]||(t[10]=e("label",{for:"value",class:"block mb-2 text-white"},"Значение",-1)),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.value=s),type:"number",step:"0.01",id:"value",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[d,l.value.value]]),t[11]||(t[11]=e("label",{for:"max_uses",class:"block mb-2 text-white"},"Максимум использований",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.max_uses=s),type:"number",id:"max_uses",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[d,l.value.max_uses]]),t[12]||(t[12]=e("label",{for:"used",class:"block mb-2 text-white"},"Использовано",-1)),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.used=s),type:"number",id:"used",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[d,l.value.used]])]),_:1,__:[8,9,10,11,12]},8,["isOpen","title"]),y(C,{isOpen:v.value,title:"Удаление промокода",confirmText:"Удалить",onClose:n,onConfirm:V},{default:h(()=>[e("div",Q,[t[13]||(t[13]=_(" Вы уверены, что хотите удалить промокод ")),e("b",null,o(l.value.code),1),t[14]||(t[14]=_("? "))])]),_:1},8,["isOpen"])]))}});export{oe as default};
