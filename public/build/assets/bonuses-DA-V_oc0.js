import{r as u,c as i,o as l,a as e,b as g,w as f,v,F as h,d as w,e as C,f as S,t as x,W as d,g as j,n as F,u as R,S as $}from"./app-B4k5rrsx.js";import{_ as D}from"./Dashboard-D-iSJIvD.js";import{R as k}from"./MainModal-CACzSMUH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"mb-4 flex justify-between items-center"},L={class:"relative w-1/3"},U={class:"bg-gray-800 p-4 rounded-md"},X={class:"w-full table-auto text-white"},H={class:"px-4 py-2"},W={class:"px-4 py-2"},q={class:"px-4 py-2 flex space-x-2"},z=["onClick"],A=["onClick"],I={class:"mt-4 flex justify-center items-center space-x-2"},G={class:"text-white"},J={layout:D},te=Object.assign(J,{__name:"bonuses",props:{bonuses:Object,filters:Object},setup(c){var _,y;const p=u(((_=c.filters)==null?void 0:_.search)||""),n=u({min_amount:"",bonus_percent:""}),a=u(!1),m=u(!1),M=()=>{d.get("/admin/payment_bonuses",{search:p.value},{preserveState:!0,replace:!0})},T=()=>{n.value={min_amount:"",bonus_percent:""},a.value=!0},B=r=>{n.value={...r},a.value=!0},E=r=>{n.value={...r},m.value=!0},o=()=>{a.value=!1,m.value=!1},b=(y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"),N=()=>{n.value.id?d.put(`/admin/payment_bonuses/${n.value.id}`,n.value,{headers:{"X-CSRF-TOKEN":b},onSuccess:o}):d.post("/admin/payment_bonuses",n.value,{headers:{"X-CSRF-TOKEN":b},onSuccess:o})},O=()=>{d.delete(`/admin/payment_bonuses/${n.value.id}`,{headers:{"X-CSRF-TOKEN":b},onSuccess:o})};return(r,t)=>(l(),i("div",null,[t[8]||(t[8]=e("h1",{class:"text-2xl font-semibold text-white mb-4"},"Настройки бонусов",-1)),e("div",K,[e("div",L,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onInput:M,type:"text",placeholder:"Поиск по минимальной сумме...",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"},null,544),[[v,p.value]])]),e("button",{onClick:T,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500"}," Создать ")]),e("div",U,[e("table",X,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Мин. сумма"),e("th",{class:"px-4 py-2 text-left"},"Процент бонуса"),e("th",{class:"px-4 py-2 text-left"},"Действия")])],-1)),e("tbody",null,[(l(!0),i(h,null,w(c.bonuses.data,s=>(l(),i("tr",{key:s.id,class:"border-t border-gray-700 hover:bg-gray-700 transition"},[e("td",H,x(s.min_amount),1),e("td",W,x(s.bonus_percent)+"%",1),e("td",q,[e("button",{onClick:V=>B(s),class:"text-blue-400 hover:text-blue-300"}," Редактировать ",8,z),e("button",{onClick:V=>E(s),class:"text-red-400 hover:text-red-300"}," Удалить ",8,A)])]))),128))])])]),e("div",I,[(l(!0),i(h,null,w(c.bonuses.links,s=>(l(),j(R($),{key:s.label,href:s.url,innerHTML:s.label,class:F([["px-4 py-2 rounded-md",s.active?"bg-gray-700 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500",!s.url&&"cursor-not-allowed opacity-50"],"transition-all duration-200"])},null,8,["href","innerHTML","class"]))),128))]),g(k,{"is-open":a.value,title:n.value.id?"Редактирование бонуса":"Создание бонуса","confirm-text":"Сохранить",onClose:o,onConfirm:N},{default:C(()=>[t[4]||(t[4]=e("label",{for:"min_amount",class:"block mb-2 text-white"},"Минимальная сумма",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.min_amount=s),type:"number",id:"min_amount",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[v,n.value.min_amount]]),t[5]||(t[5]=e("label",{for:"bonus_percent",class:"block mb-2 text-white"},"Процент бонуса",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.bonus_percent=s),type:"number",id:"bonus_percent",class:"w-full bg-gray-700 text-white p-2 rounded-md focus:outline-none"},null,512),[[v,n.value.bonus_percent]])]),_:1,__:[4,5]},8,["is-open","title"]),g(k,{"is-open":m.value,title:"Удаление бонуса","confirm-text":"Удалить",onClose:o,onConfirm:O},{default:C(()=>[e("div",G,[t[6]||(t[6]=S(" Вы уверены, что хотите удалить бонус с минимальной суммой ")),e("b",null,x(n.value.min_amount),1),t[7]||(t[7]=S("? "))])]),_:1},8,["is-open"])]))}});export{te as default};
